<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  

  
  <title>blogs</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Explain是什么  1    SIMPLE    dlc_device    index    index_siteid    index_siteid    4        7391    Using where 使用Explain关键字可以模拟优化器执行SQL查询语句,从而知道MySQL是如何处理你的SQL语句的。分徐你的查询语句或是表结构的性能瓶颈 Explain能干嘛  表的读取顺序">
<meta name="keywords" content="php,java,javascript,node,go,lua,nginx,sphinx,elasticesarch,算法">
<meta property="og:type" content="article">
<meta property="og:title" content="blogs">
<meta property="og:url" content="https://wulimax.github.io/2019/09/16/docs/mysql/2/index.html">
<meta property="og:site_name" content="blogs">
<meta property="og:description" content="Explain是什么  1    SIMPLE    dlc_device    index    index_siteid    index_siteid    4        7391    Using where 使用Explain关键字可以模拟优化器执行SQL查询语句,从而知道MySQL是如何处理你的SQL语句的。分徐你的查询语句或是表结构的性能瓶颈 Explain能干嘛  表的读取顺序">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2019-01-03T02:37:39.195Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="blogs">
<meta name="twitter:description" content="Explain是什么  1    SIMPLE    dlc_device    index    index_siteid    index_siteid    4        7391    Using where 使用Explain关键字可以模拟优化器执行SQL查询语句,从而知道MySQL是如何处理你的SQL语句的。分徐你的查询语句或是表结构的性能瓶颈 Explain能干嘛  表的读取顺序">
  
    <link rel="alternate" href="/atom.xml" title="blogs" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">blogs</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://wulimax.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-docs/mysql/2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/09/16/docs/mysql/2/" class="article-date">
  <time datetime="2019-09-16T07:05:47.894Z" itemprop="datePublished">2019-09-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Explain是什么 </p>
<p>1    SIMPLE    dlc_device    index    index_siteid    index_siteid    4        7391    Using where</p>
<p>使用Explain关键字可以模拟优化器执行SQL查询语句,从而知道MySQL是如何处理你的SQL语句的。分徐你的查询语句或是表结构的性能瓶颈</p>
<p>Explain能干嘛 </p>
<p>表的读取顺序 </p>
<p>数据读取操作的操作类型 </p>
<p>哪些索引可以使用 </p>
<p>哪些索引可以被实际使用 </p>
<p>表之间的引用 </p>
<p>每张表有多少航被优化器查询 </p>
<p>Explain如何使用 </p>
<p>Explain + SQL语句</p>
<p>执行计划包含的信息 </p>
<table>
<thead>
<tr>
<th>id</th>
<th>select_type</th>
<th>table</th>
<th>type</th>
<th>possible_keys</th>
<th>key</th>
<th>key_len</th>
<th>ref</th>
<th>rows</th>
<th>Extra</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>SIMPLE</td>
<td>dlc_device</td>
<td>index</td>
<td>index_siteid</td>
<td>index_siteid</td>
<td>4</td>
<td></td>
<td>7391</td>
<td>Using where</td>
</tr>
</tbody></table>
<p>id </p>
<p>select查询的序列号,表示查询中执行select子句或操作表的顺序<br>id相同,执行顺序由上至下<br>id不同,如果是子查询,id的序号会递增,id值越大优先级越高,越先被执行</p>
<p>select_type </p>
<p>主要有以下6种</p>
<p>SIMPLE </p>
<p>简单的SELECT查询,查询中不包含子查询或者UNION </p>
<p>PRIMARY </p>
<p>查询中若包含任何复杂的子部分,最外层查询则被标记为PRIMARY </p>
<p>SUBQUERY </p>
<p>在SELECT或WHERE列表中包含了子查询 </p>
<p>DERIVED </p>
<p>在FROM列表中包含的子查询被标记为DERIVED(衍生),MySQL会地柜执行这些子查询,把结果放在临时表里 </p>
<p>UNION </p>
<p>若第二个SELECT出现在UNION之后,则被标记为UNION;若UNION包含在FROM子句的子查询中,外层SELECT将被标记为DERIVED </p>
<p>UNION RESULT </p>
<p>从UNION表获取结果的SELECT </p>
<p>table </p>
<p>显示一行的数据是关于哪张表的</p>
<p>type </p>
<p>主要有以下8种</p>
<p>ALL </p>
<p>Full Table Scan,将遍历全表以找到匹配行 </p>
<p>index </p>
<p>Full Index Scan,index与ALL的区别为index类型之便利索引树,这通常要ALL快,因为索引文件通常比数据文件小 </p>
<p>range </p>
<p>只检索给定范围的行,使用一个索引来选择行。key列显示使用了哪个索引。一般就是在你的where语句中出现了between,&lt;,&gt;,in等的查询,这种扫描索引比扫描权标要好,因为只需要开始于索引的某一点,二结束于另一点,不用扫描全部索引。 </p>
<p>ref </p>
<p>非唯一性索引扫描,返回匹配某个单独值的所有行。本质上也是一种索引访问,它返回所有匹配某个单独值的行,然而它可能会找到多个符合条件的行,所以他应该属于查找和扫描的混合体 </p>
<p>eq_ref </p>
<p>唯一性索引扫描,对于每个索引健,表中只有一条记录与之匹配。常见主键或唯一主键扫描 </p>
<p>const </p>
<p>表示通过索引一次就找到了,const用于比较primary key或者unique索引。因为只匹配一行数据,所以很快 </p>
<p>system </p>
<p>表只有一行记录(等于系统表),这是const类型的特例,平时不会出现,这个也可以忽略不计 </p>
<p>NULL </p>
<p>显示查询了何种类型 </p>
<p>从最好到最差依次是:system&gt;const&gt;eq_ref&gt;ref&gt;range&gt;index&gt;ALL </p>
<p>一般来说,得保证查询至少达到range级别,最好能达到ref </p>
<p>possible_keys </p>
<p>显示可能引用在这张表中的索引,一个或多个,查询涉及到字段上若存在索引,则该索引将被列出,但不一定查询实际使用</p>
<p>key </p>
<p>实际使用的索引,如果为NULL,则没有使用索引<br>查询中若使用了覆盖索引(查询的字段和索引字段符合),则该索引仅出现在key列表中</p>
<p>key_len </p>
<p>表示索引中使用的字节数,可通过高该列计算查询中使用的索引长度。在不损失精确性的情况下,长度越短越好。key_len显示的值为索引字段的最大可能长度,并非实际使用长度,即key_len是根据表定义计算而得,不是通过表内检索出的</p>
<p>ref </p>
<p>表示索引的哪一列被使用了,如果可能的话,是一个常数,哪些列或常量被用于查找索引列上的值</p>
<p>rows </p>
<p>根据表的统计信息及索引选用情况,大致估算出找到所需的记录所需要读取的行数</p>
<p>Extra </p>
<p>包含不适合在其他列中显示但十分重要的额外信息,其中前三个比较常见</p>
<p>Using filesort </p>
<p>说明MySQL会对数据使用一个外部的索引排序,而不是按照表内的索引顺序进行读取。MySQL中无法利用索引完成的排序操作称为“文件排序” </p>
<p>Using temporary </p>
<p>使用了临时表保存中间结果,MySQL在对查询结果排序时使用临时表。常见于order by和分组查询group by </p>
<p>Using index </p>
<p>表示相应的select操作中使用了覆盖索引,避免访问了表的数据航,效率不错! </p>
<p>如果同时出现Using where,表明索引 </p>
<p>Using where </p>
<p>表示使用了where过滤 </p>
<p>Using join buffer </p>
<p>表示使用了连接缓存 </p>
<p>impossible where </p>
<p>where子句的值总是false,不能用来获取任何元祖 </p>
<p>select tables optimized away </p>
<p>在没有group by子句的情况下,基于索引优化min/max操作或者对于MyISAM存储引擎优化COUNT(*)操作,不必等到执行阶段再进行计算,查询执行计划生成的阶段即完成优化 </p>
<p>distinct </p>
<p>优化distinct操作,在找到第一匹配的元祖后即停止找同样的动作 </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://wulimax.github.io/2019/09/16/docs/mysql/2/" data-id="ck0m2ip3d000pq4u1ikgq5kl6" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2019/09/16/docs/mysql/4/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          (no title)
        
      </div>
    </a>
  
  
    <a href="/2019/09/16/docs/maxwell/README/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title"></div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/09/16/url/">(no title)</a>
          </li>
        
          <li>
            <a href="/2019/09/16/README/">(no title)</a>
          </li>
        
          <li>
            <a href="/2019/09/16/docs/wx/README/">(no title)</a>
          </li>
        
          <li>
            <a href="/2019/09/16/docs/wx/intercepto/">(no title)</a>
          </li>
        
          <li>
            <a href="/2019/09/16/docs/TopN/README/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 wulimax<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>